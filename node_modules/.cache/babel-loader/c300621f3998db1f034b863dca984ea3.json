{"ast":null,"code":"var _jsxFileName = \"/home/sandeep/projects/9flats-final/9flats/client/src/components/Entity/Description/Description.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { useLocation, useHistory, useParams } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport { getRoomStatusBackend } from '../../../redux/actions/entityActions';\nimport styles from '../Entity.module.css';\nexport default function Description({\n  basicDetails,\n  blockedDates\n}) {\n  const location = useLocation();\n  const history = useHistory();\n  const params = useParams();\n  const dispatch = useDispatch();\n  const query = new URLSearchParams(location.search);\n  let s = query.get('start_date').split(\"-\").map(Number);\n  let e = query.get('end_date').split(\"-\").map(Number);\n  blockedDates = blockedDates ? Object.values(blockedDates) : [];\n\n  for (let i = 0; i < blockedDates.length; i++) {\n    let temp = blockedDates[i].split(\"-\").reverse().map(Number);\n    blockedDates[i] = new Date(temp[0], temp[1] - 1, temp[2]);\n  }\n\n  const [startDate, setStartDate] = useState(new Date(s[0], s[1] - 1, s[2]));\n  const [endDate, setEndDate] = useState(new Date(e[0], e[1] - 1, e[2]));\n  const [changed, setChanged] = useState(false);\n  useEffect(() => {\n    console.log(startDate, endDate);\n\n    if (changed) {\n      let end_update = new Date(Number(startDate));\n      end_update.setDate(startDate.getDate() + 1);\n      setEndDate(end_update);\n    }\n  }, [startDate]);\n\n  const handleStartDate = date => {\n    setStartDate(date);\n    setChanged(true);\n  };\n\n  const addDays = days => {\n    var result = new Date();\n    result.setDate(result.getDate() + days);\n    console.log(\"*********\", result);\n    return result;\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    let start = startDate.toLocaleDateString().split(\"/\").reverse().join(\"-\");\n    let end = endDate.toLocaleDateString().split(\"/\").reverse().join(\"-\");\n    let payload = `/${params['property_id']}?search_query=${query.get('search_query')}&start_date=${start}&end_date=${end}`;\n    dispatch(getRoomStatusBackend(payload));\n    history.push(`/entity${payload}`);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: `${styles.description} container mb-3 p-0`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex flex-row text-justify\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-7 col-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 29\n    }\n  }, \"Description\"), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 29\n    }\n  }), basicDetails ? basicDetails['description'] : \"Loading...\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-5 col-12  d-flex flex-column justify-content-center rounded shadow-sm \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex-column align-items-center text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"p-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 29\n    }\n  }, \"Check - in\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-center p-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(DatePicker, {\n    className: `${styles.datecomponent} ${styles.fromDate} mx-2`,\n    selected: startDate,\n    onChange: date => handleStartDate(date),\n    selectsStart: true,\n    startDate: startDate,\n    excludeDates: blockedDates,\n    endDate: endDate,\n    placeholderText: \"From\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"p-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 29\n    }\n  }, \"Check - out\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"p-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(DatePicker, {\n    className: `${styles.datecomponent} ${styles.fromDate} mx-2`,\n    selected: endDate,\n    onChange: date => setEndDate(date),\n    selectsEnd: true,\n    startDate: startDate,\n    excludeDates: blockedDates,\n    endDate: endDate,\n    minDate: startDate,\n    placeholderText: \"To\",\n    maxDate: addDays(60),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-center mt-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: `${styles.checkbutton} btn btn-sm px-5`,\n    onClick: e => handleSubmit(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 33\n    }\n  }, \"Check Availability\")))))));\n}","map":{"version":3,"sources":["/home/sandeep/projects/9flats-final/9flats/client/src/components/Entity/Description/Description.jsx"],"names":["React","useState","useEffect","DatePicker","useLocation","useHistory","useParams","useDispatch","getRoomStatusBackend","styles","Description","basicDetails","blockedDates","location","history","params","dispatch","query","URLSearchParams","search","s","get","split","map","Number","e","Object","values","i","length","temp","reverse","Date","startDate","setStartDate","endDate","setEndDate","changed","setChanged","console","log","end_update","setDate","getDate","handleStartDate","date","addDays","days","result","handleSubmit","preventDefault","start","toLocaleDateString","join","end","payload","push","description","datecomponent","fromDate","checkbutton"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,UAAP,MAAuB,kBAAvB;AACA,OAAO,4CAAP;AACA,SAAQC,WAAR,EAAqBC,UAArB,EAAiCC,SAAjC,QAAiD,kBAAjD;AACA,SAAQC,WAAR,QAA0B,aAA1B;AACA,SAAQC,oBAAR,QAAmC,sCAAnC;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AAEA,eAAe,SAASC,WAAT,CAAqB;AAACC,EAAAA,YAAD;AAAeC,EAAAA;AAAf,CAArB,EAAkD;AAC7D,QAAMC,QAAQ,GAAGT,WAAW,EAA5B;AACA,QAAMU,OAAO,GAAGT,UAAU,EAA1B;AACA,QAAMU,MAAM,GAAGT,SAAS,EAAxB;AACA,QAAMU,QAAQ,GAAGT,WAAW,EAA5B;AAEA,QAAMU,KAAK,GAAG,IAAIC,eAAJ,CAAoBL,QAAQ,CAACM,MAA7B,CAAd;AAEA,MAAIC,CAAC,GAAGH,KAAK,CAACI,GAAN,CAAU,YAAV,EAAwBC,KAAxB,CAA8B,GAA9B,EAAmCC,GAAnC,CAAuCC,MAAvC,CAAR;AACA,MAAIC,CAAC,GAAGR,KAAK,CAACI,GAAN,CAAU,UAAV,EAAsBC,KAAtB,CAA4B,GAA5B,EAAiCC,GAAjC,CAAqCC,MAArC,CAAR;AACAZ,EAAAA,YAAY,GAAGA,YAAY,GAAGc,MAAM,CAACC,MAAP,CAAcf,YAAd,CAAH,GAAiC,EAA5D;;AACA,OAAI,IAAIgB,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGhB,YAAY,CAACiB,MAAhC,EAAwCD,CAAC,EAAzC,EAA4C;AACxC,QAAIE,IAAI,GAAGlB,YAAY,CAACgB,CAAD,CAAZ,CAAgBN,KAAhB,CAAsB,GAAtB,EAA2BS,OAA3B,GAAqCR,GAArC,CAAyCC,MAAzC,CAAX;AACAZ,IAAAA,YAAY,CAACgB,CAAD,CAAZ,GAAkB,IAAII,IAAJ,CAASF,IAAI,CAAC,CAAD,CAAb,EAAkBA,IAAI,CAAC,CAAD,CAAJ,GAAU,CAA5B,EAA+BA,IAAI,CAAC,CAAD,CAAnC,CAAlB;AACH;;AAED,QAAM,CAACG,SAAD,EAAYC,YAAZ,IAA4BjC,QAAQ,CAAC,IAAI+B,IAAJ,CAASZ,CAAC,CAAC,CAAD,CAAV,EAAeA,CAAC,CAAC,CAAD,CAAD,GAAO,CAAtB,EAAyBA,CAAC,CAAC,CAAD,CAA1B,CAAD,CAA1C;AAEA,QAAM,CAACe,OAAD,EAAUC,UAAV,IAAwBnC,QAAQ,CAAC,IAAI+B,IAAJ,CAASP,CAAC,CAAC,CAAD,CAAV,EAAeA,CAAC,CAAC,CAAD,CAAD,GAAO,CAAtB,EAAyBA,CAAC,CAAC,CAAD,CAA1B,CAAD,CAAtC;AAEA,QAAM,CAACY,OAAD,EAAUC,UAAV,IAAwBrC,QAAQ,CAAC,KAAD,CAAtC;AAEAC,EAAAA,SAAS,CAAC,MAAI;AACVqC,IAAAA,OAAO,CAACC,GAAR,CAAYP,SAAZ,EAAuBE,OAAvB;;AACA,QAAGE,OAAH,EAAW;AACP,UAAII,UAAU,GAAG,IAAIT,IAAJ,CAASR,MAAM,CAACS,SAAD,CAAf,CAAjB;AACAQ,MAAAA,UAAU,CAACC,OAAX,CAAmBT,SAAS,CAACU,OAAV,KAAoB,CAAvC;AACAP,MAAAA,UAAU,CAACK,UAAD,CAAV;AACH;AACJ,GAPQ,EAOP,CAACR,SAAD,CAPO,CAAT;;AASA,QAAMW,eAAe,GAAIC,IAAD,IAAU;AAC9BX,IAAAA,YAAY,CAACW,IAAD,CAAZ;AACAP,IAAAA,UAAU,CAAC,IAAD,CAAV;AACH,GAHD;;AAIA,QAAMQ,OAAO,GAAIC,IAAD,IAAU;AACtB,QAAIC,MAAM,GAAG,IAAIhB,IAAJ,EAAb;AACAgB,IAAAA,MAAM,CAACN,OAAP,CAAeM,MAAM,CAACL,OAAP,KAAmBI,IAAlC;AACAR,IAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAwBQ,MAAxB;AACA,WAAOA,MAAP;AACH,GALD;;AAOA,QAAMC,YAAY,GAAIxB,CAAD,IAAO;AACxBA,IAAAA,CAAC,CAACyB,cAAF;AACA,QAAIC,KAAK,GAAGlB,SAAS,CAACmB,kBAAV,GAA+B9B,KAA/B,CAAqC,GAArC,EAA0CS,OAA1C,GAAoDsB,IAApD,CAAyD,GAAzD,CAAZ;AACA,QAAIC,GAAG,GAAGnB,OAAO,CAACiB,kBAAR,GAA6B9B,KAA7B,CAAmC,GAAnC,EAAwCS,OAAxC,GAAkDsB,IAAlD,CAAuD,GAAvD,CAAV;AACA,QAAIE,OAAO,GAAI,IAAGxC,MAAM,CAAC,aAAD,CAAgB,iBAAgBE,KAAK,CAACI,GAAN,CAAU,cAAV,CAA0B,eAAc8B,KAAM,aAAYG,GAAI,EAAtH;AACAtC,IAAAA,QAAQ,CAACR,oBAAoB,CAAC+C,OAAD,CAArB,CAAR;AACAzC,IAAAA,OAAO,CAAC0C,IAAR,CAAc,UAASD,OAAQ,EAA/B;AACH,GAPD;;AASA,sBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAG,GAAE9C,MAAM,CAACgD,WAAY,qBAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,8BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,EAGK9C,YAAY,GAAGA,YAAY,CAAC,aAAD,CAAf,GAAiC,YAHlD,CADJ,CADJ,eAQI;AAAK,IAAA,SAAS,EAAC,+EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,8CAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAII;AAAK,IAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,UAAD;AACI,IAAA,SAAS,EAAG,GAAEF,MAAM,CAACiD,aAAc,IAAGjD,MAAM,CAACkD,QAAS,OAD1D;AAEI,IAAA,QAAQ,EAAE1B,SAFd;AAGI,IAAA,QAAQ,EAAEY,IAAI,IAAID,eAAe,CAACC,IAAD,CAHrC;AAII,IAAA,YAAY,MAJhB;AAKI,IAAA,SAAS,EAAEZ,SALf;AAMI,IAAA,YAAY,EAAErB,YANlB;AAOI,IAAA,OAAO,EAAEuB,OAPb;AAQI,IAAA,eAAe,EAAC,MARpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CAJJ,eAgBI;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAhBJ,eAmBI;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,UAAD;AACI,IAAA,SAAS,EAAG,GAAE1B,MAAM,CAACiD,aAAc,IAAGjD,MAAM,CAACkD,QAAS,OAD1D;AAEI,IAAA,QAAQ,EAAExB,OAFd;AAGI,IAAA,QAAQ,EAAEU,IAAI,IAAIT,UAAU,CAACS,IAAD,CAHhC;AAII,IAAA,UAAU,MAJd;AAKI,IAAA,SAAS,EAAEZ,SALf;AAMI,IAAA,YAAY,EAAErB,YANlB;AAOI,IAAA,OAAO,EAAEuB,OAPb;AAQI,IAAA,OAAO,EAAEF,SARb;AASI,IAAA,eAAe,EAAC,IATpB;AAUI,IAAA,OAAO,EAAEa,OAAO,CAAC,EAAD,CAVpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CAnBJ,eAiCI;AAAK,IAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAQ,IAAA,SAAS,EAAG,GAAErC,MAAM,CAACmD,WAAY,kBAAzC;AACA,IAAA,OAAO,EAAGnC,CAAD,IAAKwB,YAAY,CAACxB,CAAD,CAD1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADJ,CAjCJ,CADJ,CARJ,CADJ,CADJ,CADJ;AAyDH","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport {useLocation, useHistory, useParams} from 'react-router-dom'\nimport {useDispatch} from 'react-redux'\nimport {getRoomStatusBackend} from '../../../redux/actions/entityActions'\nimport styles from '../Entity.module.css'\n\nexport default function Description({basicDetails, blockedDates}){\n    const location = useLocation()\n    const history = useHistory()\n    const params = useParams()\n    const dispatch = useDispatch()\n\n    const query = new URLSearchParams(location.search)\n\n    let s = query.get('start_date').split(\"-\").map(Number)\n    let e = query.get('end_date').split(\"-\").map(Number)\n    blockedDates = blockedDates ? Object.values(blockedDates) : []\n    for(let i = 0; i < blockedDates.length; i++){\n        let temp = blockedDates[i].split(\"-\").reverse().map(Number)\n        blockedDates[i] = new Date(temp[0], temp[1] - 1, temp[2])\n    }\n\n    const [startDate, setStartDate] = useState(new Date(s[0], s[1] - 1, s[2]));\n\n    const [endDate, setEndDate] = useState(new Date(e[0], e[1] - 1, e[2]));\n\n    const [changed, setChanged] = useState(false)\n\n    useEffect(()=>{\n        console.log(startDate, endDate)\n        if(changed){\n            let end_update = new Date(Number(startDate))\n            end_update.setDate(startDate.getDate()+1)\n            setEndDate(end_update)\n        }\n    },[startDate])\n\n    const handleStartDate = (date) => {\n        setStartDate(date)\n        setChanged(true)\n    }\n    const addDays = (days) => {\n        var result = new Date();\n        result.setDate(result.getDate() + days);\n        console.log(\"*********\",result)\n        return result;\n    }\n    \n    const handleSubmit = (e) => {\n        e.preventDefault()\n        let start = startDate.toLocaleDateString().split(\"/\").reverse().join(\"-\")\n        let end = endDate.toLocaleDateString().split(\"/\").reverse().join(\"-\")\n        let payload = `/${params['property_id']}?search_query=${query.get('search_query')}&start_date=${start}&end_date=${end}`\n        dispatch(getRoomStatusBackend(payload))\n        history.push(`/entity${payload}`)\n    }  \n\n    return (\n        <div>\n            <div className={`${styles.description} container mb-3 p-0`}>\n                <div className=\"d-flex flex-row text-justify\">\n                    <div className=\"col-md-7 col-12\">\n                        <p>\n                            <h2>Description</h2>\n                            <hr></hr>\n                            {basicDetails ? basicDetails['description'] : \"Loading...\"}\n                        </p>\n                    </div>\n                    <div className=\"col-md-5 col-12  d-flex flex-column justify-content-center rounded shadow-sm \">\n                        <div className=\"d-flex-column align-items-center text-center\">\n                            <div className=\"p-1\">\n                                Check - in\n                            </div>\n                            <div className=\"text-center p-1\">\n                                <DatePicker\n                                    className={`${styles.datecomponent} ${styles.fromDate} mx-2`}\n                                    selected={startDate}\n                                    onChange={date => handleStartDate(date)}\n                                    selectsStart\n                                    startDate={startDate}\n                                    excludeDates={blockedDates}\n                                    endDate={endDate}\n                                    placeholderText=\"From\"\n                                />\n                            </div>\n                            <div className=\"p-1\">\n                                Check - out\n                            </div>\n                            <div className=\"p-1\">\n                                <DatePicker\n                                    className={`${styles.datecomponent} ${styles.fromDate} mx-2`}\n                                    selected={endDate}\n                                    onChange={date => setEndDate(date)}\n                                    selectsEnd\n                                    startDate={startDate}\n                                    excludeDates={blockedDates}\n                                    endDate={endDate}\n                                    minDate={startDate}\n                                    placeholderText=\"To\"\n                                    maxDate={addDays(60)}\n                                />\n                            </div>\n                            <div className=\"text-center mt-2\">\n                                <button className={`${styles.checkbutton} btn btn-sm px-5`}\n                                onClick={(e)=>handleSubmit(e)}>\n                                    Check Availability\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}