{"ast":null,"code":"import _slicedToArray from\"/home/sandeep/projects/9flats-final/9flats/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import DatePicker from\"react-datepicker\";import\"react-datepicker/dist/react-datepicker.css\";import{useLocation,useHistory,useParams}from'react-router-dom';import{useDispatch}from'react-redux';import{getRoomStatusBackend}from'../../../redux/actions/entityActions';import styles from'../Entity.module.css';export default function Description(_ref){var basicDetails=_ref.basicDetails,blockedDates=_ref.blockedDates;var location=useLocation();var history=useHistory();var params=useParams();var dispatch=useDispatch();var query=new URLSearchParams(location.search);var s=query.get('start_date').split(\"-\").map(Number);var e=query.get('end_date').split(\"-\").map(Number);blockedDates=blockedDates?Object.values(blockedDates):[];for(var i=0;i<blockedDates.length;i++){var temp=blockedDates[i].split(\"-\").reverse().map(Number);blockedDates[i]=new Date(temp[0],temp[1]-1,temp[2]);}var _useState=useState(new Date(s[0],s[1]-1,s[2])),_useState2=_slicedToArray(_useState,2),startDate=_useState2[0],setStartDate=_useState2[1];var _useState3=useState(new Date(e[0],e[1]-1,e[2])),_useState4=_slicedToArray(_useState3,2),endDate=_useState4[0],setEndDate=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),changed=_useState6[0],setChanged=_useState6[1];useEffect(function(){console.log(startDate,endDate);if(changed){var end_update=new Date(Number(startDate));end_update.setDate(startDate.getDate()+1);setEndDate(end_update);}},[startDate]);var handleStartDate=function handleStartDate(date){setStartDate(date);setChanged(true);};var addDays=function addDays(days){var result=new Date();result.setDate(result.getDate()+days);console.log(\"*********\",result);return result;};var handleSubmit=function handleSubmit(e){e.preventDefault();var start=startDate.toLocaleDateString().split(\"/\").reverse().join(\"-\");var end=endDate.toLocaleDateString().split(\"/\").reverse().join(\"-\");var payload=\"/\".concat(params['property_id'],\"?search_query=\").concat(query.get('search_query'),\"&start_date=\").concat(start,\"&end_date=\").concat(end);dispatch(getRoomStatusBackend(payload));history.push(\"/entity\".concat(payload));};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"\".concat(styles.description,\" container mb-3 p-0\")},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-row text-justify\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-7 col-12\"},/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"h2\",null,\"Description\"),/*#__PURE__*/React.createElement(\"hr\",null),basicDetails?basicDetails['description']:\"Loading...\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-5 col-12  d-flex flex-column justify-content-center border rounded shadow-sm \"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex-column align-items-center text-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"p-1\"},\"Check - in\"),/*#__PURE__*/React.createElement(\"div\",{className:\"text-center p-1\"},/*#__PURE__*/React.createElement(DatePicker,{className:\"\".concat(styles.datecomponent,\" \").concat(styles.fromDate,\" mx-2\"),selected:startDate,onChange:function onChange(date){return handleStartDate(date);},selectsStart:true,startDate:startDate,excludeDates:blockedDates,endDate:endDate,minDate:new Date(),placeholderText:\"From\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"p-1\"},\"Check - out\"),/*#__PURE__*/React.createElement(\"div\",{className:\"p-1\"},/*#__PURE__*/React.createElement(DatePicker,{className:\"\".concat(styles.datecomponent,\" \").concat(styles.fromDate,\" mx-2\"),selected:endDate,onChange:function onChange(date){return setEndDate(date);},selectsEnd:true,startDate:startDate,excludeDates:blockedDates,endDate:endDate,minDate:new Date(),placeholderText:\"To\",maxDate:addDays(60)})),/*#__PURE__*/React.createElement(\"div\",{className:\"text-center mt-2\"},/*#__PURE__*/React.createElement(\"button\",{className:\"\".concat(styles.checkbutton,\" btn btn-sm px-5\"),onClick:function onClick(e){return handleSubmit(e);}},\"Check Availability\")))))));}","map":{"version":3,"sources":["/home/sandeep/projects/9flats-final/9flats/client/src/components/Entity/Description/Description.jsx"],"names":["React","useState","useEffect","DatePicker","useLocation","useHistory","useParams","useDispatch","getRoomStatusBackend","styles","Description","basicDetails","blockedDates","location","history","params","dispatch","query","URLSearchParams","search","s","get","split","map","Number","e","Object","values","i","length","temp","reverse","Date","startDate","setStartDate","endDate","setEndDate","changed","setChanged","console","log","end_update","setDate","getDate","handleStartDate","date","addDays","days","result","handleSubmit","preventDefault","start","toLocaleDateString","join","end","payload","push","description","datecomponent","fromDate","checkbutton"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport {useLocation, useHistory, useParams} from 'react-router-dom'\nimport {useDispatch} from 'react-redux'\nimport {getRoomStatusBackend} from '../../../redux/actions/entityActions'\nimport styles from '../Entity.module.css'\n\nexport default function Description({basicDetails, blockedDates}){\n    const location = useLocation()\n    const history = useHistory()\n    const params = useParams()\n    const dispatch = useDispatch()\n\n    const query = new URLSearchParams(location.search)\n\n    let s = query.get('start_date').split(\"-\").map(Number)\n    let e = query.get('end_date').split(\"-\").map(Number)\n    blockedDates = blockedDates ? Object.values(blockedDates) : []\n    for(let i = 0; i < blockedDates.length; i++){\n        let temp = blockedDates[i].split(\"-\").reverse().map(Number)\n        blockedDates[i] = new Date(temp[0], temp[1] - 1, temp[2])\n    }\n\n    const [startDate, setStartDate] = useState(new Date(s[0], s[1] - 1, s[2]));\n\n    const [endDate, setEndDate] = useState(new Date(e[0], e[1] - 1, e[2]));\n\n    const [changed, setChanged] = useState(false)\n\n    useEffect(()=>{\n        console.log(startDate, endDate)\n        if(changed){\n            let end_update = new Date(Number(startDate))\n            end_update.setDate(startDate.getDate()+1)\n            setEndDate(end_update)\n        }\n    },[startDate])\n\n    const handleStartDate = (date) => {\n        setStartDate(date)\n        setChanged(true)\n    }\n    const addDays = (days) => {\n        var result = new Date();\n        result.setDate(result.getDate() + days);\n        console.log(\"*********\",result)\n        return result;\n    }\n    \n    const handleSubmit = (e) => {\n        e.preventDefault()\n        let start = startDate.toLocaleDateString().split(\"/\").reverse().join(\"-\")\n        let end = endDate.toLocaleDateString().split(\"/\").reverse().join(\"-\")\n        let payload = `/${params['property_id']}?search_query=${query.get('search_query')}&start_date=${start}&end_date=${end}`\n        dispatch(getRoomStatusBackend(payload))\n        history.push(`/entity${payload}`)\n    }  \n\n    return (\n        <div>\n            <div className={`${styles.description} container mb-3 p-0`}>\n                <div className=\"d-flex flex-row text-justify\">\n                    <div className=\"col-md-7 col-12\">\n                        <p>\n                            <h2>Description</h2>\n                            <hr></hr>\n                            {basicDetails ? basicDetails['description'] : \"Loading...\"}\n                        </p>\n                    </div>\n                    <div className=\"col-md-5 col-12  d-flex flex-column justify-content-center border rounded shadow-sm \">\n                        <div className=\"d-flex-column align-items-center text-center\">\n                            <div className=\"p-1\">\n                                Check - in\n                            </div>\n                            <div className=\"text-center p-1\">\n                                <DatePicker\n                                    className={`${styles.datecomponent} ${styles.fromDate} mx-2`}\n                                    selected={startDate}\n                                    onChange={date => handleStartDate(date)}\n                                    selectsStart\n                                    startDate={startDate}\n                                    excludeDates={blockedDates}\n                                    endDate={endDate}\n                                    minDate={new Date()}\n                                    placeholderText=\"From\"\n                                />\n                            </div>\n                            <div className=\"p-1\">\n                                Check - out\n                            </div>\n                            <div className=\"p-1\">\n                                <DatePicker\n                                    className={`${styles.datecomponent} ${styles.fromDate} mx-2`}\n                                    selected={endDate}\n                                    onChange={date => setEndDate(date)}\n                                    selectsEnd\n                                    startDate={startDate}\n                                    excludeDates={blockedDates}\n                                    endDate={endDate}\n                                    minDate={new Date()}\n                                    placeholderText=\"To\"\n                                    maxDate={addDays(60)}\n                                />\n                            </div>\n                            <div className=\"text-center mt-2\">\n                                <button className={`${styles.checkbutton} btn btn-sm px-5`}\n                                onClick={(e)=>handleSubmit(e)}>\n                                    Check Availability\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}