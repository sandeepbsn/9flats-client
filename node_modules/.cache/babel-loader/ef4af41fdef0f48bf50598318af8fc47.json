{"ast":null,"code":"import _regeneratorRuntime from\"/home/sandeep/projects/9flats-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/sandeep/projects/9flats-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/home/sandeep/projects/9flats-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/sandeep/projects/9flats-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/sandeep/projects/9flats-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Form,Button}from\"react-bootstrap\";import styles from'./Login.module.css';import{Link,useHistory}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import GoogleLogin from'react-google-login';// import FacebookLogin from 'react-facebook-login/dist/facebook-login-render-props'\nimport FacebookLogin from'react-facebook-login';import{loginNativeBackend,loginGoogleBackend,loginFacebookBackend}from'../../redux/actions/loginActions';import{clearMessage}from'../../redux/actions/registerActions';export default function Login(){var dispatch=useDispatch();var history=useHistory();var message=useSelector(function(state){return state.register.message;});var loginInfo=useSelector(function(state){return state.login.loginInfo;});var _useState=useState({\"email\":\"\",\"password\":\"\"}),_useState2=_slicedToArray(_useState,2),login=_useState2[0],setLogin=_useState2[1];useEffect(function(){if(message){dispatch(clearMessage());}if(loginInfo){if(loginInfo===null||loginInfo===void 0?void 0:loginInfo.token){history.push('/');}}},[loginInfo,history]);var handleChange=function handleChange(e){setLogin(_objectSpread(_objectSpread({},login),{},_defineProperty({},e.target.name,e.target.value)));};var responseGoogle=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(response){var tokenObj;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:tokenObj={\"token\":response.tokenId};_context.prev=1;_context.next=4;return dispatch(loginGoogleBackend(tokenObj));case 4:window.location.reload();_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](1);console.log(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[1,7]]);}));return function responseGoogle(_x){return _ref.apply(this,arguments);};}();var responseFacebook=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(response){var tokenObj;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(response);tokenObj={};tokenObj['name']=response.name;tokenObj['user_uuid']=response.userID;if(response.email){tokenObj['email']=response.email;}_context2.prev=5;_context2.next=8;return dispatch(loginFacebookBackend(tokenObj));case 8:window.location.reload();_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](5);console.log(_context2.t0);case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[5,11]]);}));return function responseFacebook(_x2){return _ref2.apply(this,arguments);};}();var handleSubmit=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:e.preventDefault();_context3.next=3;return dispatch(loginNativeBackend(login));case 3:case\"end\":return _context3.stop();}}},_callee3);}));return function handleSubmit(_x3){return _ref3.apply(this,arguments);};}();console.log(loginInfo);return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"container mt-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"\".concat(styles.bordering,\" rounded tab-box\")},/*#__PURE__*/React.createElement(\"div\",{className:\"outer-box\"},/*#__PURE__*/React.createElement(\"div\",{className:\"outer-box\"},/*#__PURE__*/React.createElement(\"div\",{className:\"inner-box row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-sm-6\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Log in via e-mail\"),/*#__PURE__*/React.createElement(Form,{onSubmit:function onSubmit(e){return handleSubmit(e);}},/*#__PURE__*/React.createElement(Form.Group,{controlId:\"email\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Email address\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"email\",autoFocus:\"true\",name:\"email\",onChange:function onChange(e){return handleChange(e);}})),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"password\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Password\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"password\",name:\"password\",onChange:function onChange(e){return handleChange(e);}})),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"formBasicCheckbox\"},/*#__PURE__*/React.createElement(Form.Check,{type:\"checkbox\",label:\"Remember me\"})),/*#__PURE__*/React.createElement(Button,{variant:\"warning\",type:\"submit\"},\"Log in\"),/*#__PURE__*/React.createElement(Form.Text,{className:\"text-primary\"},\"Forgot your password? Haven't received confirmation instructions?\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-sm-6\"},/*#__PURE__*/React.createElement(\"h1\",null,\"or log in with\"),/*#__PURE__*/React.createElement(\"div\",{className:\"facebook mt-4 mb-4\"},/*#__PURE__*/React.createElement(FacebookLogin,{appId:\"203954837724135\",autoLoad:false,fields:\"name,email,picture\",callback:responseFacebook})),/*#__PURE__*/React.createElement(\"div\",{className:\"amazon mt-3  mb-3\"},/*#__PURE__*/React.createElement(GoogleLogin,{clientId:\"471977914473-cn7u1rs5sopnfdh3a3u6bt17ecpp50t3.apps.googleusercontent.com\",buttonText:\"Sign in with Google\",onSuccess:responseGoogle,onFailure:responseGoogle,cookiePolicy:'single_host_origin',isSignedIn:false}))))))),/*#__PURE__*/React.createElement(\"div\",{className:\"small\",id:\"required\"},\"The fields marked with * are required\"),/*#__PURE__*/React.createElement(\"div\",{className:\"outer-box\"},/*#__PURE__*/React.createElement(\"h5\",{className:\"text-center\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Link,{to:\"/signup\",className:\"btn btn-primary \"},\"Not a member yet? Sign up now.\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"outer-box text-center d-none d-md-block mb-5\"},/*#__PURE__*/React.createElement(\"a\",{alt:\"The following media featured 9flats.com: Bild, Sueddeutsche Zeitung, Hamburger Abendblatt, Welt, RTL 2, Techcrunch, The Next Web\",href:\"http://about.9flats.com/press/?lang=en\"},/*#__PURE__*/React.createElement(\"img\",{src:\"//assets.9flats.com/assets/i18n/en/press_banner_940x76-655826b25475282229c9d250726f2c9bef368ebe1d69db1939f5d2df08741dbb.png\",alt:\"\"})))));}","map":{"version":3,"sources":["/home/sandeep/projects/9flats-client/src/components/Login/Login.jsx"],"names":["React","useState","useEffect","Form","Button","styles","Link","useHistory","useDispatch","useSelector","GoogleLogin","FacebookLogin","loginNativeBackend","loginGoogleBackend","loginFacebookBackend","clearMessage","Login","dispatch","history","message","state","register","loginInfo","login","setLogin","token","push","handleChange","e","target","name","value","responseGoogle","response","tokenObj","tokenId","window","location","reload","console","log","responseFacebook","userID","email","handleSubmit","preventDefault","bordering"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\"\nimport { Form, Button } from \"react-bootstrap\"\nimport styles from './Login.module.css'\nimport {Link, useHistory} from 'react-router-dom'\nimport {useDispatch, useSelector} from 'react-redux'\nimport GoogleLogin from 'react-google-login'\n// import FacebookLogin from 'react-facebook-login/dist/facebook-login-render-props'\nimport FacebookLogin from 'react-facebook-login';\n\nimport {\n  loginNativeBackend, \n  loginGoogleBackend, \n  loginFacebookBackend\n} from '../../redux/actions/loginActions'\n\nimport {clearMessage} from '../../redux/actions/registerActions'\n\n\nexport default function Login(){\n  const dispatch = useDispatch()\n  const history = useHistory()\n  const message = useSelector(state => state.register.message)\n  const loginInfo = useSelector(state => state.login.loginInfo)\n  const [login, setLogin] = useState({\n      \"email\":\"\",\n      \"password\":\"\",\n  })\n\n  useEffect(()=>{\n    if(message){\n      dispatch(clearMessage())\n    }\n    if (loginInfo){\n      if(loginInfo?.token){\n        history.push('/')\n      }\n    }\n  },[loginInfo,history])\n\n  const handleChange = (e) => {\n    setLogin({\n        ...login,\n        [e.target.name] : e.target.value\n    })\n  }\n\n  const responseGoogle = async(response) => {\n    let tokenObj = {\n      \"token\": response.tokenId\n    }\n    try {\n      await dispatch(loginGoogleBackend(tokenObj))\n      window.location.reload()\n      \n    } catch (error) {\n      console.log(error)\n    }\n  }\n\n  const responseFacebook = async(response) => {\n    console.log(response)\n    let tokenObj = {}\n    tokenObj['name'] = response.name\n    tokenObj['user_uuid'] = response.userID\n    if(response.email){\n      tokenObj['email'] = response.email \n    }\n    try {\n      await dispatch(loginFacebookBackend(tokenObj)) \n      window.location.reload()     \n    } catch (error) {\n      console.log(error)\n    }\n  }\n\n  const handleSubmit = async(e) => {\n      e.preventDefault()\n      await dispatch(loginNativeBackend(login))\n  }\n  console.log(loginInfo)\n  return (\n    <div>\n      <div className=\"container mt-5\">\n        <div className={`${styles.bordering} rounded tab-box`}>\n          <div className=\"outer-box\">\n            <div className=\"outer-box\">\n              <div className=\"inner-box row\">\n                <div className=\"col-sm-6\">\n                  <h1>Log in via e-mail</h1>\n                  <Form onSubmit={(e)=>handleSubmit(e)}>\n                    <Form.Group controlId=\"email\">\n                      <Form.Label>Email address</Form.Label>\n                      <Form.Control type=\"email\" autoFocus=\"true\" name=\"email\" onChange={(e)=>handleChange(e)} />\n                    </Form.Group>\n\n                    <Form.Group controlId=\"password\">\n                      <Form.Label>Password</Form.Label>\n                      <Form.Control type=\"password\" name=\"password\" onChange={(e)=>handleChange(e)} />\n                    </Form.Group>\n                    <Form.Group controlId=\"formBasicCheckbox\">\n                      <Form.Check type=\"checkbox\" label=\"Remember me\" />\n                    </Form.Group>\n                    <Button variant=\"warning\" type=\"submit\">\n                      Log in</Button>\n                    <Form.Text className=\"text-primary\">\n                      Forgot your password? Haven't received confirmation instructions?\n                    </Form.Text>\n                  </Form>\n                </div>\n                <div className=\"col-sm-6\">\n                  <h1>or log in with</h1>\n                  <div className=\"facebook mt-4 mb-4\">\n                    <FacebookLogin\n                      appId=\"203954837724135\"\n                      autoLoad={false}\n                      fields=\"name,email,picture\"\n                      callback={responseFacebook}\n                    />\n                  </div>\n                  <div className=\"amazon mt-3  mb-3\">\n                    <GoogleLogin\n                      clientId=\"471977914473-cn7u1rs5sopnfdh3a3u6bt17ecpp50t3.apps.googleusercontent.com\"\n                      buttonText='Sign in with Google'\n                      onSuccess={responseGoogle}\n                      onFailure={responseGoogle}\n                      cookiePolicy={'single_host_origin'}\n                      isSignedIn={false}/>  \n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div className=\"small\" id=\"required\">The fields marked with * are required</div>\n        <div className=\"outer-box\">\n          <h5 className=\"text-center\">\n            <div><Link to=\"/signup\" className=\"btn btn-primary \">Not a member yet? Sign up now.</Link></div>\n          </h5>\n        </div>\n        <div className=\"outer-box text-center d-none d-md-block mb-5\">\n          <a alt=\"The following media featured 9flats.com: Bild, Sueddeutsche Zeitung, Hamburger Abendblatt, Welt, RTL 2, Techcrunch, The Next Web\" href=\"http://about.9flats.com/press/?lang=en\">\n            <img src=\"//assets.9flats.com/assets/i18n/en/press_banner_940x76-655826b25475282229c9d250726f2c9bef368ebe1d69db1939f5d2df08741dbb.png\" alt=\"\"/></a>\n        </div>\n      </div>\n    </div>\n\n  )\n}\n"]},"metadata":{},"sourceType":"module"}