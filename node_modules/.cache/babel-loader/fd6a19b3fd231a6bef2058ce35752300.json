{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link,useLocation,useHistory}from'react-router-dom';import{useSelector,useDispatch}from'react-redux';import{Card}from'react-bootstrap';import{getListingsBackend}from'../../redux/actions/listingActions';import styles from'./ListingPage.module.css';import PageList from'./PageList';import Maps from'./Maps';import{v4 as uuidv4}from'uuid';export default function Properties(){var data=useSelector(function(state){return state.listing.pageData;});var dispatch=useDispatch();var history=useHistory();var location=useLocation();var query=new URLSearchParams(location.search);var payload=\"search_query=\".concat(query.get('search_query'),\"&page=\").concat(query.get('page'),\"&per_page=\").concat(query.get('per_page'),\"&category=\").concat(query.get('category'),\"&amenities=\").concat(query.get('amenities'),\"&price=\").concat(query.get('price'));var pageData;var totalPages;useEffect(function(){dispatch(getListingsBackend(payload));},[payload]);var per_page=query.get('per_page')===\"\"||null?10:Number(query.get('per_page'));if(data){pageData=data['data'];totalPages=Math.ceil(data['totalCount']/per_page);}console.log(data);return/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 col-sm-6 col-md-6 col-lg-6 col-xl-6\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"\".concat(styles.searchHeader,\" col-12 p-2\")},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(Card.Body,null,/*#__PURE__*/React.createElement(Card.Title,null,/*#__PURE__*/React.createElement(\"h1\",{className:\"search__header__city text-truncate\"},/*#__PURE__*/React.createElement(\"b\",null,query.get('search_query')+\" \"),data?/*#__PURE__*/React.createElement(\"small\",{className:\"\".concat(styles.searchHeaderFont,\" text-muted\")},\"(\",data['totalCount'],\" results)\"):null))))),data&&data['data'].length?data['data'].map(function(item){return/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 p-20\",key:uuidv4()},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(Link,{to:\"/entity/\".concat(item['id'],\"?search_query=\").concat(item['name'],\"&start_date=\").concat(query.get('start_date'),\"&end_date=\").concat(query.get('end_date'))},/*#__PURE__*/React.createElement(Card.Img,{variant:\"top\",src:item.images[0],bsPrefix:\"card-img\"})),/*#__PURE__*/React.createElement(\"span\",{className:\"\".concat(item['status']==='available'?[styles.label_photo,styles.label_instant].join(\" \"):[styles.label_photo,styles.label_not].join(\" \"))},item['status']),/*#__PURE__*/React.createElement(Card.Body,null,/*#__PURE__*/React.createElement(Card.Title,null,/*#__PURE__*/React.createElement(\"h6\",null,/*#__PURE__*/React.createElement(\"span\",{className:\"\".concat(styles.category,\" \").concat(styles.badge)},item.type),/*#__PURE__*/React.createElement(\"h6\",{className:\"accommodates ml-2 d-inline\"},\"Accommodates 2\"))),/*#__PURE__*/React.createElement(Card.Title,{bsPrefix:\"\"}),/*#__PURE__*/React.createElement(Card.Link,{href:\"/entity\"},/*#__PURE__*/React.createElement(\"h5\",{className:\"text-primary\"},item.name,\",\",item.city)),/*#__PURE__*/React.createElement(\"div\",{className:\"price mt-2\"},/*#__PURE__*/React.createElement(Card.Text,null,/*#__PURE__*/React.createElement(\"span\",{className:\"price_index price_index_notour\"},/*#__PURE__*/React.createElement(\"small\",{className:\"price_index__small price_index__small_first\"},\"from \\u20B9 \"),/*#__PURE__*/React.createElement(\"strong\",{className:\"price_index__strong\"},/*#__PURE__*/React.createElement(\"span\",{className:\"money\"},item.price,\" \")),/*#__PURE__*/React.createElement(\"small\",{className:\"price_index__small price_index__small_last\"},\" per night\")))))));}):/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",null,\"NO DATA FOUND\"))),data&&data['data'].length?/*#__PURE__*/React.createElement(\"div\",{className:styles.page},/*#__PURE__*/React.createElement(PageList,{total_pages:Math.ceil(Number(data['totalCount'])/per_page)})):null),/*#__PURE__*/React.createElement(\"div\",{className:\"col-sm-6 col-md-6 col-lg-6 col-xl-6 d-none d-sm-block mt-2\",style:{right:0,left:\"auto\",position:\"relative\",\"zIndex\":\"1\"}},/*#__PURE__*/React.createElement(\"div\",null,data&&data['data']?/*#__PURE__*/React.createElement(Maps,{coordinates:data['data']}):\"Loading...\")));}","map":{"version":3,"sources":["/home/sandeep/projects/9flats-final/9flats/client/src/components/Listing/Properties.jsx"],"names":["React","useState","useEffect","Link","useLocation","useHistory","useSelector","useDispatch","Card","getListingsBackend","styles","PageList","Maps","v4","uuidv4","Properties","data","state","listing","pageData","dispatch","history","location","query","URLSearchParams","search","payload","get","totalPages","per_page","Number","Math","ceil","console","log","searchHeader","searchHeaderFont","length","map","item","images","label_photo","label_instant","join","label_not","category","badge","type","name","city","price","page","right","left","position"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from 'react'\nimport {Link,useLocation, useHistory} from 'react-router-dom'\nimport {useSelector, useDispatch} from 'react-redux'\nimport {Card} from 'react-bootstrap'\nimport {getListingsBackend} from '../../redux/actions/listingActions'   \nimport styles from './ListingPage.module.css'\nimport PageList from './PageList'\nimport Maps from './Maps'\nimport {v4 as uuidv4} from 'uuid'\n\nexport default function Properties(){\n    const data = useSelector(state=>state.listing.pageData)\n    \n    const dispatch = useDispatch()\n    const history = useHistory()\n    const location = useLocation()\n    const query = new URLSearchParams(location.search)\n    let payload = `search_query=${query.get('search_query')}&page=${query.get('page')}&per_page=${query.get('per_page')}&category=${query.get('category')}&amenities=${query.get('amenities')}&price=${query.get('price')}`\n    let pageData\n    let totalPages \n\n    useEffect(()=>{\n        dispatch(getListingsBackend(payload))\n    },[payload])\n    let per_page = query.get('per_page') === \"\" || null ? 10 : Number(query.get('per_page'))\n    \n    \n    if(data){\n        pageData = data['data']\n        \n        totalPages = Math.ceil(data['totalCount'] / per_page)\n    }\n    \n    console.log(data)\n    return (\n        <div className=\"row\">\n             <div className=\"col-12 col-sm-6 col-md-6 col-lg-6 col-xl-6\">\n                <div className=\"row\">\n                    <div className={`${styles.searchHeader} col-12 p-2`}>\n                        <Card>\n                            <Card.Body>\n                                <Card.Title>\n                                    <h1 className=\"search__header__city text-truncate\">\n                                        <b>\n                                            {query.get('search_query') + \" \"}\n                                        </b>\n                                        {data ? <small className={`${styles.searchHeaderFont} text-muted`} >({data['totalCount']} results)</small>:null}\n                                    </h1>\n                                </Card.Title>\n                            </Card.Body>\n                        </Card>\n                    </div>\n                    {data && data['data'].length ? data['data'].map(item => (\n                        <div className=\"col-6 p-20\" key={uuidv4()}>\n                            <Card >\n                                <Link to = {`/entity/${item['id']}?search_query=${item['name']}&start_date=${query.get('start_date')}&end_date=${query.get('end_date')}`}>\n                                    <Card.Img variant=\"top\" src={item.images[0]} bsPrefix=\"card-img\" />\n                                </Link>\n                                <span className={`${item['status'] === 'available' ? [styles.label_photo,styles.label_instant].join(\" \") :[styles.label_photo, styles.label_not].join(\" \")}`}>{item['status']}</span>\n                                <Card.Body>\n                                    <Card.Title>\n                                        <h6>\n                                            <span className={`${styles.category} ${styles.badge}`}>{item.type}</span><h6 className=\"accommodates ml-2 d-inline\">Accommodates 2</h6>\n                                        </h6>\n                                    </Card.Title>\n                                    <Card.Title bsPrefix=\"\"></Card.Title>\n                                    <Card.Link href=\"/entity\" ><h5 className=\"text-primary\">{item.name},{item.city}</h5></Card.Link>\n                                    <div className=\"price mt-2\">\n                                        <Card.Text>\n                                            <span className=\"price_index price_index_notour\">\n                                                <small className=\"price_index__small price_index__small_first\">from &#8377; </small>\n                                                <strong className=\"price_index__strong\">\n                                                    <span className=\"money\">{item.price} </span>\n                                                </strong>\n                                                <small className=\"price_index__small price_index__small_last\"> per night</small>\n                                            </span>\n                                        </Card.Text>\n                                    </div>\n                                </Card.Body>\n                            </Card>\n                        </div>\n                    )\n                    )\n                        : (<div><h1>NO DATA FOUND</h1></div>)}\n                </div>\n                {data && data['data'].length ? \n                <div className={styles.page}>\n                    <PageList total_pages = {Math.ceil(Number(data['totalCount'])/per_page)}/>\n                </div>:null}\n            </div>\n            <div className=\"col-sm-6 col-md-6 col-lg-6 col-xl-6 d-none d-sm-block mt-2\"\n                style={{ right: 0, left: \"auto\", position: \"relative\" ,\"zIndex\":\"1\"}}>\n                <div>\n                    {data && data['data'] ? <Maps coordinates={data['data']}/> : \"Loading...\"}\n                </div>\n            </div>\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}