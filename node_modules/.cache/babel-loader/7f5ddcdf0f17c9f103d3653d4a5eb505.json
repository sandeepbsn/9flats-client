{"ast":null,"code":"import _slicedToArray from\"/home/sandeep/projects/9flats-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import DatePicker from\"react-datepicker\";import\"react-datepicker/dist/react-datepicker.css\";import{useHistory,useLocation}from'react-router-dom';import{useDispatch}from'react-redux';import styles from'./ListingPage.module.css';import{getListingsBackend}from'../../redux/actions/listingActions';export default function DateComponent(_ref){var search_input=_ref.search_input;var location=useLocation();var history=useHistory();var dispatch=useDispatch();var query=new URLSearchParams(location.search);var s=query.get('start_date').split(\"-\").map(Number);var e=query.get('end_date').split(\"-\").map(Number);console.log(s,e);var _useState=useState(new Date(s[0],s[1]-1,s[2])),_useState2=_slicedToArray(_useState,2),startDate=_useState2[0],setStartDate=_useState2[1];var _useState3=useState(new Date(e[0],e[1]-1,e[2])),_useState4=_slicedToArray(_useState3,2),endDate=_useState4[0],setEndDate=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),changed=_useState6[0],setChanged=_useState6[1];useEffect(function(){console.log(startDate,endDate);if(changed){var end_update=new Date(Number(startDate));end_update.setDate(startDate.getDate()+1);setEndDate(end_update);}},[startDate]);var handleStartDate=function handleStartDate(date){setStartDate(date);setChanged(true);};var handleSubmit=function handleSubmit(e){e.preventDefault();var start=startDate.toLocaleDateString().split(\"/\").reverse().join(\"-\");var end=endDate.toLocaleDateString().split(\"/\").reverse().join(\"-\");var payload=\"search_query=\".concat(search_input,\"&start_date=\").concat(start,\"&end_date=\").concat(end,\"&page=\").concat(query.get('page'),\"&per_page=\").concat(query.get('per_page'),\"&category=\").concat(query.get('category'),\"&amenities=\").concat(query.get('amenities'),\"&price=\").concat(query.get('price'));dispatch(getListingsBackend(payload));history.push(\"/listing?\".concat(payload));};return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(DatePicker,{className:\"\".concat(styles.datecomponent,\" mx-2\"),selected:startDate,onChange:function onChange(date){return handleStartDate(date);},selectsStart:true,startDate:startDate,endDate:endDate,placeholderText:\"From\"}),/*#__PURE__*/React.createElement(DatePicker,{className:\"\".concat(styles.datecomponent,\" mx-2\"),selected:endDate,onChange:function onChange(date){return setEndDate(date);},selectsEnd:true,startDate:startDate,endDate:endDate,minDate:startDate,placeholderText:\"To\"})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"button\",{className:\"\".concat(styles.searchbutton,\" btn btn-sm btn-warning px-3\"),onClick:function onClick(e){return handleSubmit(e);}},\"Search\")));}","map":{"version":3,"sources":["/home/sandeep/projects/9flats-client/src/components/Listing/DateComponent.jsx"],"names":["React","useState","useEffect","DatePicker","useHistory","useLocation","useDispatch","styles","getListingsBackend","DateComponent","search_input","location","history","dispatch","query","URLSearchParams","search","s","get","split","map","Number","e","console","log","Date","startDate","setStartDate","endDate","setEndDate","changed","setChanged","end_update","setDate","getDate","handleStartDate","date","handleSubmit","preventDefault","start","toLocaleDateString","reverse","join","end","payload","push","datecomponent","searchbutton"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react'\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport {useHistory, useLocation} from 'react-router-dom'\nimport {useDispatch} from 'react-redux'\nimport styles from './ListingPage.module.css'\nimport {getListingsBackend} from '../../redux/actions/listingActions'\n\nexport default function DateComponent({search_input}){\n    const location = useLocation()\n    const history = useHistory()\n    const dispatch = useDispatch()\n    const query = new URLSearchParams(location.search)\n\n    let s = query.get('start_date').split(\"-\").map(Number)\n    let e = query.get('end_date').split(\"-\").map(Number)\n    console.log(s,e)\n\n    const [startDate, setStartDate] = useState(new Date(s[0], s[1] - 1, s[2]));\n\n    const [endDate, setEndDate] = useState(new Date(e[0], e[1] - 1, e[2]));\n\n    const [changed, setChanged] = useState(false)\n\n    useEffect(()=>{\n        console.log(startDate, endDate)\n        if(changed){\n            let end_update = new Date(Number(startDate))\n            end_update.setDate(startDate.getDate()+1)\n            setEndDate(end_update)\n        }\n    },[startDate])\n\n    const handleStartDate = (date) => {\n        setStartDate(date)\n        setChanged(true)\n    }\n    const handleSubmit = (e) => {\n        e.preventDefault()\n        let start = startDate.toLocaleDateString().split(\"/\").reverse().join(\"-\")\n        let end = endDate.toLocaleDateString().split(\"/\").reverse().join(\"-\")\n        let payload = `search_query=${search_input}&start_date=${start}&end_date=${end}&page=${query.get('page')}&per_page=${query.get('per_page')}&category=${query.get('category')}&amenities=${query.get('amenities')}&price=${query.get('price')}`\n        dispatch(getListingsBackend(payload))\n        history.push(`/listing?${payload}`)\n    }\n    \n    \n    return (\n        <div className=\"d-flex\">\n            <div>\n                <DatePicker\n                    className={`${styles.datecomponent} mx-2`}\n                    selected={startDate}\n                    onChange={date => handleStartDate(date)}\n                    selectsStart\n                    startDate={startDate}\n                    endDate={endDate}\n                    placeholderText=\"From\"\n                />\n                <DatePicker\n                    className={`${styles.datecomponent} mx-2`}\n                    selected={endDate}\n                    onChange={date => setEndDate(date)}\n                    selectsEnd\n                    startDate={startDate}\n                    endDate={endDate}\n                    minDate={startDate}\n                    placeholderText=\"To\"\n                />\n          </div> \n          <div>\n              <button className={`${styles.searchbutton} btn btn-sm btn-warning px-3`}\n              onClick = {(e) => handleSubmit(e)}>\n                  Search\n              </button>\n          </div>\n        </div>\n      );\n}"]},"metadata":{},"sourceType":"module"}